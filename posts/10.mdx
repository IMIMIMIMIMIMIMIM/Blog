---
title: "Next.js에서 use client 에러 해결하기"
summary: "서버 컴포넌트와 클라이언트 컴포넌트의 차이"
date: "2025-09-18"
thumbnail: "/images/useclient.png"
subject: "NEXT"
---

Next.js 13 이상부터는 서버 컴포넌트와 클라이언트 컴포넌트가 명확히 구분된다. 이 과정에서 "use client" 관련 에러가 자주 발생하며 특히 React 훅이나 브라우저 API를 사용할 때 빈번하게 나타난다. 본 글에서는 해당 에러의 원인과 해결 과정을 정리하였다.

## 문제 상황

아래와 같이 클라이언트 기능을 포함한 컴포넌트를 작성할 경우 에러가 발생한다.

```tsx
import { useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);

  return <button onClick={() => setCount(count + 1)}>Count: {count}</button>;
}
```

빌드 또는 실행 시 다음과 같은 오류가 출력된다.

```
Error: React Hook "useState" is not supported in Server Components.
```

## 원인

Next.js에서 기본적으로 모든 컴포넌트는 **서버 컴포넌트**로 동작한다. 서버 컴포넌트는 훅이나 DOM 조작 등 브라우저 전용 기능을 지원하지 않는다. 따라서 클라이언트 전용 기능이 필요한 경우 컴포넌트 파일의 최상단에 "use client" 지시어를 선언해야 한다.

## 해결 방법

컴포넌트 상단에 "use client"를 추가함으로써 문제를 해결할 수 있다.

```tsx
"use client";

import { useState } from "react";

export default function Counter() {
  const [count, setCount] = useState(0);

  return <button onClick={() => setCount(count + 1)}>Count: {count}</button>;
}
```

위와 같이 수정하면 정상적으로 상태 관리가 가능하다.

## 서버/클라이언트 컴포넌트 분리의 중요성

모든 컴포넌트를 무작정 클라이언트로 만들면 번들 크기가 커지고, 렌더링 성능과 보안성에도 영향을 준다.  
따라서 **서버 컴포넌트는 데이터 처리 및 렌더링 중심**, **클라이언트 컴포넌트는 사용자 인터랙션이나 브라우저 API 사용 중심**으로 분리하는 것이 권장된다.  
이 전략을 적용하면 불필요한 클라이언트 코드 로딩을 줄이고 페이지 초기 로딩 속도를 최적화할 수 있다.

## 실제 프로젝트에서 흔히 발생하는 사례

- **Context Provider 사용**: 상태 관리용 Context Provider를 클라이언트 컴포넌트로 선언하지 않으면 에러 발생
- **localStorage, sessionStorage 접근**: 서버 컴포넌트에서 접근 시 ReferenceError 발생
- **이벤트 핸들러 사용**: 버튼 클릭, 마우스 이벤트 등 클라이언트 전용 인터랙션 처리 시 "use client" 필요

이러한 패턴은 대부분의 Next.js 프로젝트에서 반복적으로 발생하며, "use client" 지시어를 적절히 적용하는 것이 핵심이다.

## 정리

- Next.js 13 이상에서는 기본적으로 서버 컴포넌트가 적용된다
- 훅이나 브라우저 API를 사용하려면 "use client"를 선언해야 한다
- 클라이언트 컴포넌트는 성능 최적화를 위해 꼭 필요한 경우에만 사용하는 것이 바람직하다

## 결론

'use client' 에러는 Next.js의 서버와 클라이언트 컴포넌트 구조를 제대로 이해하지 못한 경우에 발생한다. 이번 경험을 통해 컴포넌트의 역할을 명확히 구분하는 것이 중요하다는 점을 확인할 수 있었다.

좀 더 자세한 내용은 아래 공식 문서에서 확인할 수 있다.
https://ko.react.dev/reference/rsc/use-client#when-to-use-use-client
